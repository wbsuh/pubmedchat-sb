{"ast":null,"code":"var _jsxFileName = \"/Users/wsuh/Code/my-chat-app/src/components/App.js\";\nimport React, { Component } from 'react';\nimport SendbirdChat from '@sendbird/chat';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport Title from './Title';\nimport MessageList from './MessageList';\nimport SendMessageForm from './SendMessageForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass App extends Component {\n  constructor() {\n    super();\n    this.handleUserIdChange = event => {\n      this.setState({\n        userId: event.target.value\n      });\n    };\n    // async componentDidMount() {\n    //   await this.connectToSenbird('min');\n    // }\n    this.handleConnect = async () => {\n      try {\n        await this.connectToSenbird(this.state.userId);\n        this.setState({\n          isConnected: true\n        });\n      } catch (error) {\n        console.error('Sendbird Connection Error:', error);\n      }\n    };\n    this.connectToSenbird = async userId => {\n      try {\n        await this.sb.connect(userId);\n        // ... after successful connection\n      } catch (error) {\n        console.error('Sendbird Connection Error:', error);\n      }\n    };\n    // connectToSenbird = async (userId) => {\n    //   try {\n    //     await this.sb.connect(userId);\n    //   } catch (error) {\n    //     console.error('Sendbird Connection Error:', error);\n    //   }\n    // };\n    this.createOpenChannel = async () => {\n      const params = {\n        name: \"My Open Channel\",\n        coverUrlOrImage: \"http://example.com/cover.jpg\",\n        operatorUserIds: [\"wonbae\"],\n        data: \"Additional information about the channel\",\n        customType: \"my_custom_type\"\n      };\n      try {\n        const channel = await this.sb.openChannel.createChannel(params);\n        console.log(\"Open channel created:\", channel);\n        await channel.enter();\n        this.channel = channel; // Set the current channel context\n      } catch (error) {\n        console.error(\"Error creating or entering open channel:\", error);\n      }\n    };\n    this.createGroupChannel = async () => {\n      const params = {\n        invitedUserIds: ['min', 'wonbae'],\n        name: \"My Group Channel\",\n        coverUrl: \"http://example.com/cover.jpg\",\n        operatorUserIds: ['wonbae'],\n        isDistinct: true\n      };\n      try {\n        const channel = await this.sb.groupChannel.createChannel(params);\n        console.log(\"Group channel created:\", channel);\n        this.channel = channel; // Set the current channel context\n        console.log(\"Successfully set this.channel to the newly created group channel.\");\n      } catch (error) {\n        console.error(\"Error creating group channel:\", error);\n      }\n    };\n    this.sendMessage = async (textMessage, customType = '', data = '') => {\n      if (!this.channel) {\n        console.error('Channel is not defined.');\n        return;\n      }\n      const params = {\n        message: textMessage,\n        customType: customType,\n        data: data\n      };\n      try {\n        this.channel.sendUserMessage(params).onSucceeded(message => {\n          const formattedMessage = {\n            messageId: message.messageId,\n            text: message.message,\n            senderId: message.sender.userId,\n            createdAt: message.createdAt,\n            nickname: message.sender.nickname\n          };\n          this.setState(prevState => ({\n            messages: [...prevState.messages, formattedMessage]\n          }));\n        }).onFailed((error, message) => {\n          console.error(\"Failed to send message:\", error);\n        });\n      } catch (error) {\n        console.error(\"Send Message Error:\", error);\n      }\n    };\n    this.state = {\n      messages: [],\n      channelType: null,\n      userId: '',\n      // To be inputted by the user\n      isConnected: false // Flag to check if connected \n    };\n    this.sb = SendbirdChat.init({\n      appId: '24C7F7B1-B8F1-43FF-96BE-797B57528110',\n      modules: [new OpenChannelModule(), new GroupChannelModule()]\n    });\n  }\n  renderChannelTypeSelection() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.setState({\n          channelType: 'open'\n        }, this.createOpenChannel),\n        children: \"Open Channel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.setState({\n          channelType: 'group'\n        }, this.createGroupChannel),\n        children: \"Group Channel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), !this.state.channelType && this.renderChannelTypeSelection(), this.state.channelType && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MessageList, {\n          messages: this.state.messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SendMessageForm, {\n          sendMessage: this.sendMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","SendbirdChat","OpenChannelModule","GroupChannelModule","Title","MessageList","SendMessageForm","jsxDEV","_jsxDEV","Fragment","_Fragment","App","constructor","handleUserIdChange","event","setState","userId","target","value","handleConnect","connectToSenbird","state","isConnected","error","console","sb","connect","createOpenChannel","params","name","coverUrlOrImage","operatorUserIds","data","customType","channel","openChannel","createChannel","log","enter","createGroupChannel","invitedUserIds","coverUrl","isDistinct","groupChannel","sendMessage","textMessage","message","sendUserMessage","onSucceeded","formattedMessage","messageId","text","senderId","sender","createdAt","nickname","prevState","messages","onFailed","channelType","init","appId","modules","renderChannelTypeSelection","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","render","className"],"sources":["/Users/wsuh/Code/my-chat-app/src/components/App.js"],"sourcesContent":["import React, { Component } from 'react';\nimport SendbirdChat from '@sendbird/chat';\nimport { OpenChannelModule } from '@sendbird/chat/openChannel';\nimport { GroupChannelModule } from '@sendbird/chat/groupChannel';\nimport Title from './Title';\nimport MessageList from './MessageList';\nimport SendMessageForm from './SendMessageForm';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      messages: [],\n      channelType: null,\n      userId: '', // To be inputted by the user\n      isConnected: false, // Flag to check if connected \n    };\n    this.sb = SendbirdChat.init({\n      appId: '24C7F7B1-B8F1-43FF-96BE-797B57528110',\n      modules: [new OpenChannelModule(), new GroupChannelModule()],\n    });\n  }\n\n  handleUserIdChange = (event) => {\n    this.setState({ userId: event.target.value });\n  };\n\n  // async componentDidMount() {\n  //   await this.connectToSenbird('min');\n  // }\n\n  handleConnect = async () => {\n    try {\n      await this.connectToSenbird(this.state.userId);\n      this.setState({ isConnected: true });\n    } catch (error) {\n      console.error('Sendbird Connection Error:', error);\n    }\n  };\n\n  connectToSenbird = async (userId) => {\n    try {\n      await this.sb.connect(userId);\n      // ... after successful connection\n    } catch (error) {\n      console.error('Sendbird Connection Error:', error);\n    }\n  };\n\n  // connectToSenbird = async (userId) => {\n  //   try {\n  //     await this.sb.connect(userId);\n  //   } catch (error) {\n  //     console.error('Sendbird Connection Error:', error);\n  //   }\n  // };\n\n  createOpenChannel = async () => {\n    const params = {\n      name: \"My Open Channel\",\n      coverUrlOrImage: \"http://example.com/cover.jpg\",\n      operatorUserIds: [\"wonbae\"],\n      data: \"Additional information about the channel\",\n      customType: \"my_custom_type\"\n    };\n\n    try {\n      const channel = await this.sb.openChannel.createChannel(params);\n      console.log(\"Open channel created:\", channel);\n      await channel.enter();\n      this.channel = channel; // Set the current channel context\n    } catch (error) {\n      console.error(\"Error creating or entering open channel:\", error);\n    }\n  };\n\n  createGroupChannel = async () => {\n    const params = {\n      invitedUserIds: ['min','wonbae'], \n      name: \"My Group Channel\",\n      coverUrl: \"http://example.com/cover.jpg\",\n      operatorUserIds: ['wonbae'], \n      isDistinct: true,\n    };\n  \n    try {\n      const channel = await this.sb.groupChannel.createChannel(params);\n      console.log(\"Group channel created:\", channel);\n      this.channel = channel; // Set the current channel context\n      console.log(\"Successfully set this.channel to the newly created group channel.\");\n    } catch (error) {\n      console.error(\"Error creating group channel:\", error);\n    }\n  };\n\n  sendMessage = async (textMessage, customType = '', data = '') => {\n    if (!this.channel) {\n      console.error('Channel is not defined.');\n      return;\n    }\n\n    const params = {\n      message: textMessage,\n      customType: customType,\n      data: data,\n    };\n\n    try {\n      this.channel.sendUserMessage(params)\n        .onSucceeded((message) => {\n          const formattedMessage = {\n            messageId: message.messageId,\n            text: message.message,\n            senderId: message.sender.userId,\n            createdAt: message.createdAt,\n            nickname: message.sender.nickname,\n          };\n          this.setState(prevState => ({\n            messages: [...prevState.messages, formattedMessage]\n          }));\n        })\n        .onFailed((error, message) => {\n          console.error(\"Failed to send message:\", error);\n        });\n    } catch (error) {\n      console.error(\"Send Message Error:\", error);\n    }\n  };\n\n  renderChannelTypeSelection() {\n    return (\n      <div>\n        <button onClick={() => this.setState({ channelType: 'open' }, this.createOpenChannel)}>Open Channel</button>\n        <button onClick={() => this.setState({ channelType: 'group' }, this.createGroupChannel)}>Group Channel</button>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <Title />\n        {!this.state.channelType && this.renderChannelTypeSelection()}\n        {this.state.channelType && (\n          <>\n            <MessageList messages={this.state.messages} />\n            <SendMessageForm sendMessage={this.sendMessage} />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}